<script setup lang="ts">
import { useRouter, useRoute } from 'vue-router'
import { computed } from 'vue'

const router = useRouter()
const route = useRoute()

// 接收工具标题作为 props
interface Props {
  toolTitle?: string
}
const props = defineProps<Props>()

const goHome = () => {
  router.push('/')
}

const isHomePage = computed(() => route.path === '/')
</script>

<template>
  <header class="h-14 px-4 md:px-6 flex items-center justify-between border-b bg-white sticky top-0 z-50">
    <!-- Left: Back button + Logo/Title -->
    <div class="flex items-center gap-3">
      <!-- Back button (only show when not on home page) -->
      <button
        v-if="!isHomePage"
        @click="goHome"
        class="p-2 hover:bg-slate-100 rounded-lg transition-colors"
        title="返回主页"
      >
        <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <!-- Logo (home page) or Tool Title (tool page) -->
      <div v-if="isHomePage" class="flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity" @click="goHome">
        <div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
        </div>
        <span class="text-lg font-bold text-slate-900 hidden sm:inline">PDF Toolbox</span>
      </div>

      <!-- Tool Title (tool page) -->
      <div v-else class="flex items-center gap-2">
        <div class="w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
        </div>
        <span class="text-lg font-semibold text-slate-900 truncate max-w-md">{{ toolTitle || '工具' }}</span>
      </div>
    </div>

    <!-- Right actions -->
    <div class="flex items-center">
      <a href="https://github.com" target="_blank" rel="noopener" class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
        <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222 0 3-1.606 0-2.686 1.084-2.686 1.084-.726 1.087-1.33.974-1.825-.148-.366-.27-1.247-.762-2.679-.918.293-.18.492-.312-.492-.312-.433.144-.312.369-.652.489-.262.119-.559.044-.719.147-.19.105-.439-.432-.752-.848-1.102-2.056.368-2.807.775-3.465 1.014.308.058.628.3.628.557.826-.037.217-.381.777-.848 1.87.522 2.284.913 3.577.913.533 0 .955-.212 1.705-.627 2.375-.417.668-.953 1.009-2.378 1.009-1.435 0-2.607-.996-2.607-2.232 0-.508.265-1.001.704-1.498 1.795-.289.657-1.83-.974-1.83-.974-.236-.659-.573-.996-.573-.996-.395-.994.297-1.498.717-1.498.717.416.416.903.908.903 1.772 0 .755-.226 1.27-.63 1.515-.404.244-.892.394-1.764.394-.586 0-1.227-.192-1.853-.586-.627-.394-1.261-.592-1.906-.592-.486 0-.963.079-1.43.237-.466.158-.925.37-1.374.637-.449.267-.887.566-1.312.905-.425.338-.822.722-1.197 1.147-.358.436-.688.924-.986 1.454-.298.53-.535 1.103-.711 1.711-.177.607-.272 1.25-.285 1.915-.014.665-.09 1.338-.226 2.007-.136.67-.308 1.335-.515 1.966-.207.631-.324 1.297-.489 1.964-.496.607-.007 1.234-.123 1.882-.35.647-.227-1.296-.502-1.934-.825-.638-.323-1.296-.734-1.964-.847-.667-.113-1.358-.084-2.071.087-.713.171-1.415.461-2.103.866-.688.405-1.379.941-2.053 1.607-.674.666-1.358 1.396-2.025 2.185-.667.789-1.325 1.606-1.969 2.453-.644.847-.983 1.922-1.004 3.225-.021 1.303.399 2.412 1.109 3.298 1.838.886.729 1.563 1.356 2.179 1.881.616.525 1.369.847 2.127 1.594 2.273.247.146.527.264.669.357 1.131.093.463-.272-.608-.657-1.038-1.154-1.291-.497-.253-1.033-.371-1.608-.354-.575.017-1.157.135-1.74.353-.584.218-1.179.528-1.768.931-.589.403-1.186.895-1.782 1.477-.596.582-1.193 1.198-1.798 1.839-.605.641-1.206 1.287-1.812 2.043-.606.756-1.211 1.507-1.821 2.428-.61.921-.986 2.084-1.13 3.411-.144 1.327.203 2.593.707 3.562 1.513.969.806 1.775 1.991 1.889 3.545.114 1.554.716 2.85 1.873 4.089.157 1.239-.351 2.456-1.066 3.651-.715 1.195-1.569 2.187-2.562 2.976-.993.789-2.008 1.287-3.045 1.495-1.037.207-2.078.112-3.123.285-.789.116-1.588.333-2.382.651-3.582 1.004-.649.729-1.329 1.416-2.041 2.06-.712.645-1.43 1.178-2.155 1.6-.725.421-1.453.594-2.182.519-.729-.075-1.457-.074-2.186.003-.729.077-1.459.229-2.192.457-.733.228-1.471.539-2.212 1.034-.741.495-1.486.931-2.23 1.307-.744.377-1.491.506-2.239.389-.748-.117-1.498-.127-2.248-.03-.75.097-1.502.288-2.256 1.157-.754.869-1.51 1.686-2.267 2.45-.757.764-1.517 1.229-2.278 1.395-.761.166-1.524.13-2.289-.108-1.521.487-1.493 1.1-2.453 1.836-.96.735-1.923 1.434-2.887 2.097-.964.663-1.93.987-2.897.971-.967-.016-1.935.35-2.904.998-.969.648-1.94 1.519-2.912 2.613-.972 1.094-1.945 1.96-2.919 2.598-.974.638-1.95.669-2.925.592-.975-.077-1.95-.222-2.925-.435-.975-.213-1.951-.537-2.927-.371-.976.166-1.952.629-2.928 1.389-.976.76-1.952 1.712-2.928 2.855-.976 1.143-1.952 1.903-2.928 2.281-.976.378-1.952.22-2.928-.174-.976-.394-1.952-1.187-2.928-.793-.976.394-1.952 1.401-2.928 1.796-.976.395-1.952.749-2.928 1.063-.976.314-1.952.317-2.928.003-.976-.314-1.951-1.25-2.927-1.866-.976-.616-1.951-1.693-2.927-1.077-.976.616-1.951 1.023-2.927 1.939z"/>
        </svg>
      </a>
    </div>
  </header>
</template>
